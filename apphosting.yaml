# Firebase App Hosting Configuration
# Documentation: https://firebase.google.com/docs/app-hosting

runConfig:
  # CPU and Memory allocation
  cpu: 1
  memoryMiB: 512
  
  # Minimum and maximum instances
  minInstances: 0
  maxInstances: 10
  
  # Concurrency (requests per instance)
  concurrency: 80

  # Environment variables (NON-SENSITIVE)
  # These are publicly visible in your repo, so only include non-secret values
  env:
    - variable: NUXT_PUBLIC_FIREBASE_API_KEY
      # Value should be set in Firebase Console, not here
      availability:
        - BUILD
        - RUNTIME
    
    - variable: NUXT_PUBLIC_FIREBASE_AUTH_DOMAIN
      availability:
        - BUILD
        - RUNTIME
    
    - variable: NUXT_PUBLIC_FIREBASE_PROJECT_ID
      availability:
        - BUILD
        - RUNTIME
    
    - variable: NUXT_PUBLIC_FIREBASE_STORAGE_BUCKET
      availability:
        - BUILD
        - RUNTIME
    
    - variable: NUXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
      availability:
        - BUILD
        - RUNTIME
    
    - variable: NUXT_PUBLIC_FIREBASE_APP_ID
      availability:
        - BUILD
        - RUNTIME
    
    - variable: NUXT_PUBLIC_STRIPE_PUBLISHABLE_KEY
      availability:
        - BUILD
        - RUNTIME

  # SECRETS (SENSITIVE DATA)
  # These should be stored in Google Secret Manager
  # Reference them here, but actual values are set in Firebase Console
  # Format: secret:SECRET_NAME@VERSION or secret:SECRET_NAME
  secrets:
    - variable: NUXT_FIREBASE_ADMIN_PROJECT_ID
      secret: FIREBASE_ADMIN_PROJECT_ID
      availability:
        - RUNTIME
    
    - variable: NUXT_FIREBASE_ADMIN_CLIENT_EMAIL
      secret: FIREBASE_ADMIN_CLIENT_EMAIL
      availability:
        - RUNTIME
    
    - variable: NUXT_FIREBASE_ADMIN_PRIVATE_KEY
      secret: FIREBASE_ADMIN_PRIVATE_KEY
      availability:
        - RUNTIME
    
    - variable: NUXT_GEMINI_API_KEY
      secret: GEMINI_API_KEY
      availability:
        - RUNTIME
    
    - variable: NUXT_STRIPE_SECRET_KEY
      secret: STRIPE_SECRET_KEY
      availability:
        - RUNTIME
    
    - variable: NUXT_STRIPE_WEBHOOK_SECRET
      secret: STRIPE_WEBHOOK_SECRET
      availability:
        - RUNTIME
